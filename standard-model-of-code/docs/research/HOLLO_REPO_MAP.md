# Hollo Repository Map

> Federated single-user microblogging software powered by Fedify.
> Analysis Date: 2026-01-22

## Identity

| Fact | Value |
|------|-------|
| Repository | [fedify-dev/hollo](https://github.com/fedify-dev/hollo) |
| Stars | 405 |
| License | AGPL-3.0 |
| Language | TypeScript 99.6% |
| Protocol | ActivityPub |

## Tech Stack

| Layer | Technology |
|-------|------------|
| Runtime | Node.js + tsx |
| Web Framework | Hono.js (with JSX) |
| Database | PostgreSQL |
| ORM | Drizzle ORM |
| Federation | Fedify (~1.10) |
| Validation | Zod v4 |
| Storage | flydrive (S3/filesystem) |
| Auth | Argon2, TOTP |
| Media | Sharp, fluent-ffmpeg |

## Architecture Layers

```
┌─────────────────────────────────────────────────────────────┐
│                     src/index.tsx                           │
│                   (Main Hono app)                           │
├─────────────────────────────────────────────────────────────┤
│  API Layer      │  Federation     │  OAuth         │ Pages │
│  src/api/       │  src/federation/│  src/oauth/    │ src/  │
│  v1/, v2/       │  (ActivityPub)  │  (OAuth 2.0)   │ pages/│
├─────────────────────────────────────────────────────────────┤
│                     src/entities/                           │
│                (DB → API serialization)                     │
├─────────────────────────────────────────────────────────────┤
│                  src/schema.ts (~1300 lines)                │
│                     src/db.ts                               │
│                   (Drizzle ORM)                             │
├─────────────────────────────────────────────────────────────┤
│                      PostgreSQL                             │
└─────────────────────────────────────────────────────────────┘
```

## Collider Analysis

| Metric | Value |
|--------|-------|
| Nodes | 217 |
| Edges | 1257 |
| Edge/Node Ratio | 5.8 (high connectivity) |
| Analysis Time | 1.0s |

## Key Files

| File | Purpose |
|------|---------|
| `src/index.tsx` | Main Hono app composition |
| `src/schema.ts` | Complete Drizzle schema (~1300 lines) |
| `src/federation/index.ts` | Federation setup + inbox listeners |
| `src/federation/inbox.ts` | ActivityPub inbox handlers |
| `src/oauth/middleware.ts` | Auth middleware |
| `src/entities/status.ts` | Status entity serialization |

## Directory Structure

```
hollo/
├── bin/                # Entry points (server.ts, routes.ts)
├── src/
│   ├── api/            # Mastodon-compatible REST APIs
│   │   ├── v1/         # API v1 endpoints
│   │   └── v2/         # API v2 (search, notifications)
│   ├── components/     # Hono JSX components
│   ├── entities/       # DB → API response transformers
│   ├── federation/     # ActivityPub via Fedify
│   ├── import/         # Background data import
│   ├── oauth/          # OAuth 2.0 / OpenID Connect
│   └── pages/          # Web UI pages
├── drizzle/            # SQL migrations
├── tests/              # Vitest tests
└── docs/               # Astro/Starlight docs
```

## Notable Patterns

1. **No Frontend UI** — Uses Mastodon-compatible APIs for client integration
2. **Single-User Focus** — No multi-tenant logic
3. **Federation First** — ActivityPub is core, not an add-on
4. **OAuth 2.0 + PKCE** — Modern auth flow with OpenID Connect

## Commands

```bash
pnpm dev              # Dev server with hot reload
pnpm check            # TypeScript + Biome lint
pnpm test             # Vitest tests
pnpm migrate          # Apply DB migrations
pnpm list:routes      # Show all HTTP routes
```

## Environment Variables (Required)

| Variable | Description |
|----------|-------------|
| `DATABASE_URL` | PostgreSQL connection |
| `SECRET_KEY` | Session signing (min 44 chars) |
| `DRIVE_DISK` | Storage: `fs` or `s3` |
| `STORAGE_URL_BASE` | Public asset URL |

---

## Comparison to PROJECT_elements

| Aspect | Hollo | PROJECT_elements |
|--------|-------|------------------|
| Language | TypeScript | Python + JS |
| Domain | Social/Federation | Code Analysis |
| Paradigm | Web app | Analysis tool |
| DB | PostgreSQL + Drizzle | In-memory graph |
| Agent Docs | AGENTS.md (539 lines) | CLAUDE.md + GEMINI.md |

---

*Generated by Collider + Perplexity research*
