id: OPP-ARCH-003
title: Organize 47 flat tools into logical subdirectories
status: pending
priority: P1
effort: M
impact: MEDIUM
source:
  discovery: Code Archaeology Session 2026-01-26
  evidence:
  - 47 files in flat directory
  - 21 task-related tools
  - 7 deck/card-related tools
  - 4 macro-related tools
  - 4 LOL-related tools
problem: '.agent/tools/ has 47 files with no organization.

  Hard to find related tools. No grouping by purpose.

  Contrast with ACI module which is well-organized.

  '
current_structure: '.agent/tools/

  ├── 47 files (flat)

  └── utils/ (only output_formatters.py)

  '
proposed_structure: ".agent/tools/\n├── task/           # 21 task-related tools\n\
  │   ├── triage_inbox.py\n│   ├── add_task_steps.py\n│   ├── batch_promote.py\n│\
  \   └── ...\n├── deck/           # 7 deck/card tools\n│   ├── deal_cards.py\n│ \
  \  ├── deal_cards_ui.py\n│   ├── play_card.py\n│   └── ...\n├── macro/         \
  \ # 4 macro tools\n│   ├── macro_executor.py\n│   ├── opp_generator.py\n│   └──\
  \ trigger_engine.py\n├── lol/            # 4 LOL tools\n│   ├── lol_sync.py\n│ \
  \  ├── lol_unify.py\n│   └── validate_lol.py\n├── utils/          # Shared utilities\n\
  │   ├── yaml_utils.py\n│   └── output_formatters.py\n└── standalone/     # Misc\
  \ standalone tools\n    ├── autopilot.py\n    ├── concierge.py\n    └── ...\n"
solution: "1. FIRST: Complete OPP-ARCH-008 (tool mapping) to know where each file\
  \ belongs\n2. Grep codebase and shell scripts for references to moved files:\n \
  \  - grep -r \".agent/tools/\" --include=\"*.sh\" --include=\"*.yaml\"\n   - Check\
  \ CI/CD configs (.github/workflows, Makefile, etc.)\n3. Create subdirectories: task/,\
  \ deck/, macro/, lol/, standalone/\n4. Move files to appropriate directories (based\
  \ on TOOL_REGISTRY.yaml)\n5. Update any import statements\n6. Update documentation\
  \ and shell script references\n"
acceptance_criteria:
- No more than 10 files in root .agent/tools/
- Each subdirectory has related tools
- All imports still work
- All tools still executable
- All shell scripts updated to use new paths
dependencies:
- OPP-ARCH-008
validation_notes: 'AI Validation (2026-01-26) flagged:

  - Risk of breaking shell scripts/CI that invoke tools directly

  - Must grep for path references before moving

  - Need OPP-ARCH-008 completed first to inform directory structure

  '
tags:
- organization
- structure
- maintainability
promoted_to: TASK-072
promoted_at: '2026-01-26T07:49:14.875030+00:00'
