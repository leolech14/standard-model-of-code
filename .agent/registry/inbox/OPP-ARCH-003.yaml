# Opportunity: Organize .agent/tools/ Directory
id: OPP-ARCH-003
title: "Organize 47 flat tools into logical subdirectories"
status: pending
priority: P1
effort: M
impact: MEDIUM

source:
  discovery: "Code Archaeology Session 2026-01-26"
  evidence:
    - "47 files in flat directory"
    - "21 task-related tools"
    - "7 deck/card-related tools"
    - "4 macro-related tools"
    - "4 LOL-related tools"

problem: |
  .agent/tools/ has 47 files with no organization.
  Hard to find related tools. No grouping by purpose.
  Contrast with ACI module which is well-organized.

current_structure: |
  .agent/tools/
  ├── 47 files (flat)
  └── utils/ (only output_formatters.py)

proposed_structure: |
  .agent/tools/
  ├── task/           # 21 task-related tools
  │   ├── triage_inbox.py
  │   ├── add_task_steps.py
  │   ├── batch_promote.py
  │   └── ...
  ├── deck/           # 7 deck/card tools
  │   ├── deal_cards.py
  │   ├── deal_cards_ui.py
  │   ├── play_card.py
  │   └── ...
  ├── macro/          # 4 macro tools
  │   ├── macro_executor.py
  │   ├── opp_generator.py
  │   └── trigger_engine.py
  ├── lol/            # 4 LOL tools
  │   ├── lol_sync.py
  │   ├── lol_unify.py
  │   └── validate_lol.py
  ├── utils/          # Shared utilities
  │   ├── yaml_utils.py
  │   └── output_formatters.py
  └── standalone/     # Misc standalone tools
      ├── autopilot.py
      ├── concierge.py
      └── ...

solution: |
  1. FIRST: Complete OPP-ARCH-008 (tool mapping) to know where each file belongs
  2. Grep codebase and shell scripts for references to moved files:
     - grep -r ".agent/tools/" --include="*.sh" --include="*.yaml"
     - Check CI/CD configs (.github/workflows, Makefile, etc.)
  3. Create subdirectories: task/, deck/, macro/, lol/, standalone/
  4. Move files to appropriate directories (based on TOOL_REGISTRY.yaml)
  5. Update any import statements
  6. Update documentation and shell script references

acceptance_criteria:
  - No more than 10 files in root .agent/tools/
  - Each subdirectory has related tools
  - All imports still work
  - All tools still executable
  - All shell scripts updated to use new paths

dependencies:
  - OPP-ARCH-008  # Must map tools to subsystems BEFORE moving them

validation_notes: |
  AI Validation (2026-01-26) flagged:
  - Risk of breaking shell scripts/CI that invoke tools directly
  - Must grep for path references before moving
  - Need OPP-ARCH-008 completed first to inform directory structure

tags: [organization, structure, maintainability]
